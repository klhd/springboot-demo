<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.klhd.psi.dao.UserExtendDao">


	<select id="getUserRoleList" resultType="com.klhd.psi.vo.role.RoleVO">
		select r.* from t_role r
		join t_user_role ur on (r.id = ur.role_id)
		where ur.user_id=#{id,jdbcType=INTEGER}
	</select>

	<select id="getUserPrivList" resultType="com.klhd.psi.vo.role.RolePrivilegeVO">
		select distinct p.* from t_privilege p
		join t_role_privilege rp on (p.privilege_code = rp.privilege_code)
		join t_user_role ur on (ur.role_id = rp.role_id)
		where ur.user_id=#{id,jdbcType=INTEGER}
	</select>

	<select id="getUserMenuList" resultType="com.klhd.psi.vo.menu.Menu">
		select m.* from t_menu m
		join t_role_privilege rp on (m.privilege_code = rp.privilege_code)
		join t_user_role ur on (rp.role_id = ur.role_id)
		where ur.user_id=#{id,jdbcType=INTEGER}
	</select>

</mapper>